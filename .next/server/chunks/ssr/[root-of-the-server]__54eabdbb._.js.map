{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Janjao/OneDrive%20-%20bwd%20365/Dokumente/GitHub/schoolmanagmentsystem/src/app/lib/mongodb.js"],"sourcesContent":["import { MongoClient } from \"mongodb\"\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI || \"mongodb://localhost:27017/schoolManagementSystem\"\r\nconst MONGODB_DB = process.env.MONGODB_DB || \"schoolManagementSystem\"\r\n\r\n// Check if we're in production\r\nconst isProd = process.env.NODE_ENV === \"production\"\r\n\r\n// Connection caching\r\nlet cachedClient = null\r\nlet cachedDb = null\r\n\r\nexport async function connectToDatabase() {\r\n  // If we have a cached connection, use it\r\n  if (cachedClient && cachedDb) {\r\n    return { client: cachedClient, db: cachedDb }\r\n  }\r\n\r\n  // Set options for MongoDB client\r\n  const opts = {\r\n    useNewUrlParser: true,\r\n    useUnifiedTopology: true,\r\n  }\r\n\r\n  try {\r\n    // Connect to MongoDB\r\n    const client = await MongoClient.connect(MONGODB_URI, opts)\r\n    const db = client.db(MONGODB_DB)\r\n\r\n    // Cache the connection\r\n    cachedClient = client\r\n    cachedDb = db\r\n\r\n    return { client, db }\r\n  } catch (error) {\r\n    console.error(\"MongoDB connection error:\", error)\r\n    throw new Error(\"Failed to connect to database\")\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW,IAAI;AAC/C,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAE7C,+BAA+B;AAC/B,MAAM,SAAS,oDAAyB;AAExC,qBAAqB;AACrB,IAAI,eAAe;AACnB,IAAI,WAAW;AAER,eAAe;IACpB,yCAAyC;IACzC,IAAI,gBAAgB,UAAU;QAC5B,OAAO;YAAE,QAAQ;YAAc,IAAI;QAAS;IAC9C;IAEA,iCAAiC;IACjC,MAAM,OAAO;QACX,iBAAiB;QACjB,oBAAoB;IACtB;IAEA,IAAI;QACF,qBAAqB;QACrB,MAAM,SAAS,MAAM,uGAAA,CAAA,cAAW,CAAC,OAAO,CAAC,aAAa;QACtD,MAAM,KAAK,OAAO,EAAE,CAAC;QAErB,uBAAuB;QACvB,eAAe;QACf,WAAW;QAEX,OAAO;YAAE;YAAQ;QAAG;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,MAAM,IAAI,MAAM;IAClB;AACF","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/module/page.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"cancelButton\": \"page-module__2aeaOa__cancelButton\",\n  \"container\": \"page-module__2aeaOa__container\",\n  \"emptyState\": \"page-module__2aeaOa__emptyState\",\n  \"emptyStateIcon\": \"page-module__2aeaOa__emptyStateIcon\",\n  \"emptyStateText\": \"page-module__2aeaOa__emptyStateText\",\n  \"formGroup\": \"page-module__2aeaOa__formGroup\",\n  \"modalActions\": \"page-module__2aeaOa__modalActions\",\n  \"modalContent\": \"page-module__2aeaOa__modalContent\",\n  \"modalForm\": \"page-module__2aeaOa__modalForm\",\n  \"modalOverlay\": \"page-module__2aeaOa__modalOverlay\",\n  \"modalTitle\": \"page-module__2aeaOa__modalTitle\",\n  \"moduleBody\": \"page-module__2aeaOa__moduleBody\",\n  \"moduleCard\": \"page-module__2aeaOa__moduleCard\",\n  \"moduleDescription\": \"page-module__2aeaOa__moduleDescription\",\n  \"moduleGrid\": \"page-module__2aeaOa__moduleGrid\",\n  \"moduleHeader\": \"page-module__2aeaOa__moduleHeader\",\n  \"moduleNumber\": \"page-module__2aeaOa__moduleNumber\",\n  \"moduleTitle\": \"page-module__2aeaOa__moduleTitle\",\n  \"pageTitle\": \"page-module__2aeaOa__pageTitle\",\n  \"saveButton\": \"page-module__2aeaOa__saveButton\",\n  \"viewButton\": \"page-module__2aeaOa__viewButton\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Janjao/OneDrive%20-%20bwd%20365/Dokumente/GitHub/schoolmanagmentsystem/src/app/module/Modal.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport styles from \"./page.module.css\";\r\n\r\nexport default function Modal({ isOpen, onClose, onSubmit }) {\r\n  const [formData, setFormData] = useState({\r\n    title: \"\",\r\n    module_number: \"\",\r\n    description: \"\",\r\n    instructor: \"\",\r\n    semester: \"\",\r\n    credits: \"\",\r\n    status: \"Aktiv\",\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onSubmit(formData);\r\n    onClose(); // Close modal after submission\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className={styles.modalOverlay}>\r\n      <div className={styles.modalContent}>\r\n        <h2 className={styles.modalTitle}>Neues Modul erstellen</h2>\r\n        <form onSubmit={handleSubmit} className={styles.modalForm}>\r\n          <div className={styles.formGroup}>\r\n            <label htmlFor=\"title\">Titel *</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"title\"\r\n              name=\"title\"\r\n              value={formData.title}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className={styles.formGroup}>\r\n            <label htmlFor=\"module_number\">Modulnummer *</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"module_number\"\r\n              name=\"module_number\"\r\n              value={formData.module_number}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className={styles.formGroup}>\r\n            <label htmlFor=\"description\">Beschreibung</label>\r\n            <textarea\r\n              id=\"description\"\r\n              name=\"description\"\r\n              value={formData.description}\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n          <div className={styles.formGroup}>\r\n            <label htmlFor=\"instructor\">Dozent</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"instructor\"\r\n              name=\"instructor\"\r\n              value={formData.instructor}\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n          <div className={styles.formGroup}>\r\n            <label htmlFor=\"semester\">Semester</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"semester\"\r\n              name=\"semester\"\r\n              value={formData.semester}\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n          <div className={styles.formGroup}>\r\n            <label htmlFor=\"credits\">Credits</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"credits\"\r\n              name=\"credits\"\r\n              value={formData.credits}\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n          <div className={styles.formGroup}>\r\n            <label htmlFor=\"status\">Status</label>\r\n            <select\r\n              id=\"status\"\r\n              name=\"status\"\r\n              value={formData.status}\r\n              onChange={handleChange}\r\n            >\r\n              <option value=\"Aktiv\">Aktiv</option>\r\n              <option value=\"Inaktiv\">Inaktiv</option>\r\n            </select>\r\n          </div>\r\n          <div className={styles.modalActions}>\r\n            <button\r\n              type=\"button\"\r\n              className={styles.cancelButton}\r\n              onClick={onClose}\r\n            >\r\n              Abbrechen\r\n            </button>\r\n            <button type=\"submit\" className={styles.saveButton}>\r\n              Speichern\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKe,SAAS,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE;IACzD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QACvC,OAAO;QACP,eAAe;QACf,aAAa;QACb,YAAY;QACZ,UAAU;QACV,SAAS;QACT,QAAQ;IACV;IAEA,MAAM,eAAe,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAChC,YAAY,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,KAAK,EAAE;YAAM,CAAC;IACnD;IAEA,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,SAAS;QACT,WAAW,+BAA+B;IAC5C;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,8OAAC;QAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,YAAY;kBACjC,cAAA,8OAAC;YAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,YAAY;;8BACjC,8OAAC;oBAAG,WAAW,wIAAA,CAAA,UAAM,CAAC,UAAU;8BAAE;;;;;;8BAClC,8OAAC;oBAAK,UAAU;oBAAc,WAAW,wIAAA,CAAA,UAAM,CAAC,SAAS;;sCACvD,8OAAC;4BAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,SAAS;;8CAC9B,8OAAC;oCAAM,SAAQ;8CAAQ;;;;;;8CACvB,8OAAC;oCACC,MAAK;oCACL,IAAG;oCACH,MAAK;oCACL,OAAO,SAAS,KAAK;oCACrB,UAAU;oCACV,QAAQ;;;;;;;;;;;;sCAGZ,8OAAC;4BAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,SAAS;;8CAC9B,8OAAC;oCAAM,SAAQ;8CAAgB;;;;;;8CAC/B,8OAAC;oCACC,MAAK;oCACL,IAAG;oCACH,MAAK;oCACL,OAAO,SAAS,aAAa;oCAC7B,UAAU;oCACV,QAAQ;;;;;;;;;;;;sCAGZ,8OAAC;4BAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,SAAS;;8CAC9B,8OAAC;oCAAM,SAAQ;8CAAc;;;;;;8CAC7B,8OAAC;oCACC,IAAG;oCACH,MAAK;oCACL,OAAO,SAAS,WAAW;oCAC3B,UAAU;;;;;;;;;;;;sCAGd,8OAAC;4BAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,SAAS;;8CAC9B,8OAAC;oCAAM,SAAQ;8CAAa;;;;;;8CAC5B,8OAAC;oCACC,MAAK;oCACL,IAAG;oCACH,MAAK;oCACL,OAAO,SAAS,UAAU;oCAC1B,UAAU;;;;;;;;;;;;sCAGd,8OAAC;4BAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,SAAS;;8CAC9B,8OAAC;oCAAM,SAAQ;8CAAW;;;;;;8CAC1B,8OAAC;oCACC,MAAK;oCACL,IAAG;oCACH,MAAK;oCACL,OAAO,SAAS,QAAQ;oCACxB,UAAU;;;;;;;;;;;;sCAGd,8OAAC;4BAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,SAAS;;8CAC9B,8OAAC;oCAAM,SAAQ;8CAAU;;;;;;8CACzB,8OAAC;oCACC,MAAK;oCACL,IAAG;oCACH,MAAK;oCACL,OAAO,SAAS,OAAO;oCACvB,UAAU;;;;;;;;;;;;sCAGd,8OAAC;4BAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,SAAS;;8CAC9B,8OAAC;oCAAM,SAAQ;8CAAS;;;;;;8CACxB,8OAAC;oCACC,IAAG;oCACH,MAAK;oCACL,OAAO,SAAS,MAAM;oCACtB,UAAU;;sDAEV,8OAAC;4CAAO,OAAM;sDAAQ;;;;;;sDACtB,8OAAC;4CAAO,OAAM;sDAAU;;;;;;;;;;;;;;;;;;sCAG5B,8OAAC;4BAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,YAAY;;8CACjC,8OAAC;oCACC,MAAK;oCACL,WAAW,wIAAA,CAAA,UAAM,CAAC,YAAY;oCAC9B,SAAS;8CACV;;;;;;8CAGD,8OAAC;oCAAO,MAAK;oCAAS,WAAW,wIAAA,CAAA,UAAM,CAAC,UAAU;8CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQhE","debugId":null}},
    {"offset": {"line": 406, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Janjao/OneDrive%20-%20bwd%20365/Dokumente/GitHub/schoolmanagmentsystem/src/app/module/page.jsx"],"sourcesContent":["\"use client\"; // Enable client-side features\r\n\r\nimport { useState } from \"react\";\r\nimport { connectToDatabase } from \"../lib/mongodb\";\r\nimport Link from \"next/link\";\r\nimport styles from \"./page.module.css\";\r\nimport Modal from \"./Modal\"; // Import the modal component\r\n\r\nexport default async function Modules() {\r\n  const { db } = await connectToDatabase();\r\n  const modules = await db.collection(\"modules\").find({}).toArray();\r\n\r\n  const [isModalOpen, setIsModalOpen] = useState(false); // State to control modal visibility\r\n\r\n  const handleAddModule = async (formData) => {\r\n    const response = await fetch(\"/api/modules\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        title: formData.title,\r\n        module_number: formData.module_number,\r\n        description: formData.description || \"\",\r\n        instructor: formData.instructor || \"\",\r\n        semester: formData.semester || \"\",\r\n        credits: formData.credits || \"\",\r\n        status: formData.status || \"Aktiv\",\r\n      }),\r\n    });\r\n\r\n    const result = await response.json();\r\n    if (result.success) {\r\n      window.location.reload(); // Refresh page to show new module\r\n    } else {\r\n      alert(result.error || \"Fehler beim Erstellen des Moduls\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <h1 className={styles.pageTitle}>Module</h1>\r\n      <button\r\n        className={`${styles.addButton} animated-button`}\r\n        onClick={() => setIsModalOpen(true)}\r\n      >\r\n        Neues Modul hinzufügen\r\n      </button>\r\n\r\n      {modules.length > 0 ? (\r\n        <div className={styles.moduleGrid}>\r\n          {modules.map((module) => (\r\n            <div key={module._id.toString()} className={styles.moduleCard}>\r\n              <div className={styles.moduleHeader}>\r\n                <h2 className={styles.moduleTitle}>{module.title}</h2>\r\n                <p className={styles.moduleNumber}>\r\n                  Modul ({module.module_number})\r\n                </p>\r\n              </div>\r\n              <div className={styles.moduleBody}>\r\n                <p className={styles.moduleDescription}>\r\n                  {module.description || \"Keine Beschreibung verfügbar\"}\r\n                </p>\r\n                <Link\r\n                  href={`/module/${module._id}`}\r\n                  className={`${styles.viewButton} animated-button-secondary`}\r\n                >\r\n                  Details anzeigen\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <div className={styles.emptyState}>\r\n          <div className={styles.emptyStateIcon}>📚</div>\r\n          <p className={styles.emptyStateText}>Keine Module gefunden</p>\r\n        </div>\r\n      )}\r\n\r\n      <Modal\r\n        isOpen={isModalOpen}\r\n        onClose={() => setIsModalOpen(false)}\r\n        onSubmit={handleAddModule}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA,2NAA6B,6BAA6B;AAN1D,cAAc,8BAA8B;;;;;;;AAQ7B,eAAe;IAC5B,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM,CAAA,GAAA,4HAAA,CAAA,oBAAiB,AAAD;IACrC,MAAM,UAAU,MAAM,GAAG,UAAU,CAAC,WAAW,IAAI,CAAC,CAAC,GAAG,OAAO;IAE/D,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,QAAQ,oCAAoC;IAE3F,MAAM,kBAAkB,OAAO;QAC7B,MAAM,WAAW,MAAM,MAAM,gBAAgB;YAC3C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBACnB,OAAO,SAAS,KAAK;gBACrB,eAAe,SAAS,aAAa;gBACrC,aAAa,SAAS,WAAW,IAAI;gBACrC,YAAY,SAAS,UAAU,IAAI;gBACnC,UAAU,SAAS,QAAQ,IAAI;gBAC/B,SAAS,SAAS,OAAO,IAAI;gBAC7B,QAAQ,SAAS,MAAM,IAAI;YAC7B;QACF;QAEA,MAAM,SAAS,MAAM,SAAS,IAAI;QAClC,IAAI,OAAO,OAAO,EAAE;YAClB,OAAO,QAAQ,CAAC,MAAM,IAAI,kCAAkC;QAC9D,OAAO;YACL,MAAM,OAAO,KAAK,IAAI;QACxB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,SAAS;;0BAC9B,8OAAC;gBAAG,WAAW,wIAAA,CAAA,UAAM,CAAC,SAAS;0BAAE;;;;;;0BACjC,8OAAC;gBACC,WAAW,GAAG,wIAAA,CAAA,UAAM,CAAC,SAAS,CAAC,gBAAgB,CAAC;gBAChD,SAAS,IAAM,eAAe;0BAC/B;;;;;;YAIA,QAAQ,MAAM,GAAG,kBAChB,8OAAC;gBAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,UAAU;0BAC9B,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;wBAAgC,WAAW,wIAAA,CAAA,UAAM,CAAC,UAAU;;0CAC3D,8OAAC;gCAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,YAAY;;kDACjC,8OAAC;wCAAG,WAAW,wIAAA,CAAA,UAAM,CAAC,WAAW;kDAAG,OAAO,KAAK;;;;;;kDAChD,8OAAC;wCAAE,WAAW,wIAAA,CAAA,UAAM,CAAC,YAAY;;4CAAE;4CACzB,OAAO,aAAa;4CAAC;;;;;;;;;;;;;0CAGjC,8OAAC;gCAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,UAAU;;kDAC/B,8OAAC;wCAAE,WAAW,wIAAA,CAAA,UAAM,CAAC,iBAAiB;kDACnC,OAAO,WAAW,IAAI;;;;;;kDAEzB,8OAAC,4JAAA,CAAA,UAAI;wCACH,MAAM,CAAC,QAAQ,EAAE,OAAO,GAAG,EAAE;wCAC7B,WAAW,GAAG,wIAAA,CAAA,UAAM,CAAC,UAAU,CAAC,0BAA0B,CAAC;kDAC5D;;;;;;;;;;;;;uBAdK,OAAO,GAAG,CAAC,QAAQ;;;;;;;;;qCAsBjC,8OAAC;gBAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,UAAU;;kCAC/B,8OAAC;wBAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,cAAc;kCAAE;;;;;;kCACvC,8OAAC;wBAAE,WAAW,wIAAA,CAAA,UAAM,CAAC,cAAc;kCAAE;;;;;;;;;;;;0BAIzC,8OAAC,8HAAA,CAAA,UAAK;gBACJ,QAAQ;gBACR,SAAS,IAAM,eAAe;gBAC9B,UAAU;;;;;;;;;;;;AAIlB","debugId":null}}]
}