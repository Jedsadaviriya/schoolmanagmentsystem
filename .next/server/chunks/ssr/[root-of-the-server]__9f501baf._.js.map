{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Janjao/OneDrive%20-%20bwd%20365/Dokumente/GitHub/schoolmanagmentsystem/src/app/lib/mongodb.js"],"sourcesContent":["import { MongoClient } from \"mongodb\"\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI || \"mongodb://localhost:27017/schoolManagementSystem\"\r\nconst MONGODB_DB = process.env.MONGODB_DB || \"schoolManagementSystem\"\r\n\r\n// Check if we're in production\r\nconst isProd = process.env.NODE_ENV === \"production\"\r\n\r\n// Connection caching\r\nlet cachedClient = null\r\nlet cachedDb = null\r\n\r\nexport async function connectToDatabase() {\r\n  // If we have a cached connection, use it\r\n  if (cachedClient && cachedDb) {\r\n    return { client: cachedClient, db: cachedDb }\r\n  }\r\n\r\n  // Set options for MongoDB client\r\n  const opts = {\r\n    useNewUrlParser: true,\r\n    useUnifiedTopology: true,\r\n  }\r\n\r\n  try {\r\n    // Connect to MongoDB\r\n    const client = await MongoClient.connect(MONGODB_URI, opts)\r\n    const db = client.db(MONGODB_DB)\r\n\r\n    // Cache the connection\r\n    cachedClient = client\r\n    cachedDb = db\r\n\r\n    return { client, db }\r\n  } catch (error) {\r\n    console.error(\"MongoDB connection error:\", error)\r\n    throw new Error(\"Failed to connect to database\")\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW,IAAI;AAC/C,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAE7C,+BAA+B;AAC/B,MAAM,SAAS,oDAAyB;AAExC,qBAAqB;AACrB,IAAI,eAAe;AACnB,IAAI,WAAW;AAER,eAAe;IACpB,yCAAyC;IACzC,IAAI,gBAAgB,UAAU;QAC5B,OAAO;YAAE,QAAQ;YAAc,IAAI;QAAS;IAC9C;IAEA,iCAAiC;IACjC,MAAM,OAAO;QACX,iBAAiB;QACjB,oBAAoB;IACtB;IAEA,IAAI;QACF,qBAAqB;QACrB,MAAM,SAAS,MAAM,uGAAA,CAAA,cAAW,CAAC,OAAO,CAAC,aAAa;QACtD,MAAM,KAAK,OAAO,EAAE,CAAC;QAErB,uBAAuB;QACvB,eAAe;QACf,WAAW;QAEX,OAAO;YAAE;YAAQ;QAAG;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,MAAM,IAAI,MAAM;IAClB;AACF","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/module/page.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"container\": \"page-module__2aeaOa__container\",\n  \"emptyState\": \"page-module__2aeaOa__emptyState\",\n  \"emptyStateIcon\": \"page-module__2aeaOa__emptyStateIcon\",\n  \"emptyStateText\": \"page-module__2aeaOa__emptyStateText\",\n  \"moduleBody\": \"page-module__2aeaOa__moduleBody\",\n  \"moduleCard\": \"page-module__2aeaOa__moduleCard\",\n  \"moduleDescription\": \"page-module__2aeaOa__moduleDescription\",\n  \"moduleGrid\": \"page-module__2aeaOa__moduleGrid\",\n  \"moduleHeader\": \"page-module__2aeaOa__moduleHeader\",\n  \"moduleNumber\": \"page-module__2aeaOa__moduleNumber\",\n  \"moduleTitle\": \"page-module__2aeaOa__moduleTitle\",\n  \"pageTitle\": \"page-module__2aeaOa__pageTitle\",\n  \"viewButton\": \"page-module__2aeaOa__viewButton\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Janjao/OneDrive%20-%20bwd%20365/Dokumente/GitHub/schoolmanagmentsystem/src/app/module/page.jsx"],"sourcesContent":["\"use client\"; // Enable client-side features\r\n\r\nimport { useState } from \"react\";\r\nimport { connectToDatabase } from \"../lib/mongodb\";\r\nimport Link from \"next/link\";\r\nimport styles from \"./page.module.css\";\r\nimport Modal from \"./Modal\"; // Import the modal component\r\n\r\nexport default async function Modules() {\r\n  const { db } = await connectToDatabase();\r\n  const modules = await db.collection(\"modules\").find({}).toArray();\r\n\r\n  const [isModalOpen, setIsModalOpen] = useState(false); // State to control modal visibility\r\n\r\n  const handleAddModule = async (formData) => {\r\n    const response = await fetch(\"/api/modules\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        title: formData.title,\r\n        module_number: formData.module_number,\r\n        description: formData.description || \"\",\r\n        instructor: formData.instructor || \"\",\r\n        semester: formData.semester || \"\",\r\n        credits: formData.credits || \"\",\r\n        status: formData.status || \"Aktiv\",\r\n      }),\r\n    });\r\n\r\n    const result = await response.json();\r\n    if (result.success) {\r\n      window.location.reload(); // Refresh page to show new module\r\n    } else {\r\n      alert(result.error || \"Fehler beim Erstellen des Moduls\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <h1 className={styles.pageTitle}>Module</h1>\r\n      <button\r\n        className={`${styles.addButton} animated-button`}\r\n        onClick={() => setIsModalOpen(true)}\r\n      >\r\n        Neues Modul hinzufÃ¼gen\r\n      </button>\r\n\r\n      {modules.length > 0 ? (\r\n        <div className={styles.moduleGrid}>\r\n          {modules.map((module) => (\r\n            <div key={module._id.toString()} className={styles.moduleCard}>\r\n              <div className={styles.moduleHeader}>\r\n                <h2 className={styles.moduleTitle}>{module.title}</h2>\r\n                <p className={styles.moduleNumber}>\r\n                  Modul ({module.module_number})\r\n                </p>\r\n              </div>\r\n              <div className={styles.moduleBody}>\r\n                <p className={styles.moduleDescription}>\r\n                  {module.description || \"Keine Beschreibung verfÃ¼gbar\"}\r\n                </p>\r\n                <Link\r\n                  href={`/module/${module._id}`}\r\n                  className={`${styles.viewButton} animated-button-secondary`}\r\n                >\r\n                  Details anzeigen\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <div className={styles.emptyState}>\r\n          <div className={styles.emptyStateIcon}>ðŸ“š</div>\r\n          <p className={styles.emptyStateText}>Keine Module gefunden</p>\r\n        </div>\r\n      )}\r\n\r\n      <Modal\r\n        isOpen={isModalOpen}\r\n        onClose={() => setIsModalOpen(false)}\r\n        onSubmit={handleAddModule}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;;;;AALA,cAAc,8BAA8B;;;;;;;AAQ7B,eAAe;IAC5B,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM,CAAA,GAAA,4HAAA,CAAA,oBAAiB,AAAD;IACrC,MAAM,UAAU,MAAM,GAAG,UAAU,CAAC,WAAW,IAAI,CAAC,CAAC,GAAG,OAAO;IAE/D,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,QAAQ,oCAAoC;IAE3F,MAAM,kBAAkB,OAAO;QAC7B,MAAM,WAAW,MAAM,MAAM,gBAAgB;YAC3C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBACnB,OAAO,SAAS,KAAK;gBACrB,eAAe,SAAS,aAAa;gBACrC,aAAa,SAAS,WAAW,IAAI;gBACrC,YAAY,SAAS,UAAU,IAAI;gBACnC,UAAU,SAAS,QAAQ,IAAI;gBAC/B,SAAS,SAAS,OAAO,IAAI;gBAC7B,QAAQ,SAAS,MAAM,IAAI;YAC7B;QACF;QAEA,MAAM,SAAS,MAAM,SAAS,IAAI;QAClC,IAAI,OAAO,OAAO,EAAE;YAClB,OAAO,QAAQ,CAAC,MAAM,IAAI,kCAAkC;QAC9D,OAAO;YACL,MAAM,OAAO,KAAK,IAAI;QACxB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,SAAS;;0BAC9B,8OAAC;gBAAG,WAAW,wIAAA,CAAA,UAAM,CAAC,SAAS;0BAAE;;;;;;0BACjC,8OAAC;gBACC,WAAW,GAAG,wIAAA,CAAA,UAAM,CAAC,SAAS,CAAC,gBAAgB,CAAC;gBAChD,SAAS,IAAM,eAAe;0BAC/B;;;;;;YAIA,QAAQ,MAAM,GAAG,kBAChB,8OAAC;gBAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,UAAU;0BAC9B,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;wBAAgC,WAAW,wIAAA,CAAA,UAAM,CAAC,UAAU;;0CAC3D,8OAAC;gCAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,YAAY;;kDACjC,8OAAC;wCAAG,WAAW,wIAAA,CAAA,UAAM,CAAC,WAAW;kDAAG,OAAO,KAAK;;;;;;kDAChD,8OAAC;wCAAE,WAAW,wIAAA,CAAA,UAAM,CAAC,YAAY;;4CAAE;4CACzB,OAAO,aAAa;4CAAC;;;;;;;;;;;;;0CAGjC,8OAAC;gCAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,UAAU;;kDAC/B,8OAAC;wCAAE,WAAW,wIAAA,CAAA,UAAM,CAAC,iBAAiB;kDACnC,OAAO,WAAW,IAAI;;;;;;kDAEzB,8OAAC,4JAAA,CAAA,UAAI;wCACH,MAAM,CAAC,QAAQ,EAAE,OAAO,GAAG,EAAE;wCAC7B,WAAW,GAAG,wIAAA,CAAA,UAAM,CAAC,UAAU,CAAC,0BAA0B,CAAC;kDAC5D;;;;;;;;;;;;;uBAdK,OAAO,GAAG,CAAC,QAAQ;;;;;;;;;qCAsBjC,8OAAC;gBAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,UAAU;;kCAC/B,8OAAC;wBAAI,WAAW,wIAAA,CAAA,UAAM,CAAC,cAAc;kCAAE;;;;;;kCACvC,8OAAC;wBAAE,WAAW,wIAAA,CAAA,UAAM,CAAC,cAAc;kCAAE;;;;;;;;;;;;0BAIzC,8OAAC;gBACC,QAAQ;gBACR,SAAS,IAAM,eAAe;gBAC9B,UAAU;;;;;;;;;;;;AAIlB","debugId":null}}]
}