(()=>{var e={};e.id=707,e.ids=[707],e.modules={440:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(1658);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1282:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});let n=(0,a(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Janjao\\\\GitHub\\\\schoolmanagmentsystem\\\\src\\\\components\\\\google-style-calendar.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Janjao\\GitHub\\schoolmanagmentsystem\\src\\components\\google-style-calendar.jsx","default")},1880:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var n=a(5239),r=a(8088),s=a(8170),l=a.n(s),o=a(893),i={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);a.d(t,i);let d={children:["",{children:["module",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9124)),"C:\\Users\\Janjao\\GitHub\\schoolmanagmentsystem\\src\\app\\module\\[id]\\page.jsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,9769)),"C:\\Users\\Janjao\\GitHub\\schoolmanagmentsystem\\src\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\Janjao\\GitHub\\schoolmanagmentsystem\\src\\app\\module\\[id]\\page.jsx"],u={require:a,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/module/[id]/page",pathname:"/module/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2267:e=>{e.exports={calendar:"google-style-calendar_calendar__KWue0",calendarHeader:"google-style-calendar_calendarHeader__mAkbL",calendarControls:"google-style-calendar_calendarControls__cgSW2",calendarTitle:"google-style-calendar_calendarTitle__UjUzx",navButton:"google-style-calendar_navButton__uNHrL",todayButton:"google-style-calendar_todayButton__eO3lV",calendarGrid:"google-style-calendar_calendarGrid__UWVM1",weekDayHeader:"google-style-calendar_weekDayHeader__0qqA_",calendarDay:"google-style-calendar_calendarDay__TQrue",currentMonth:"google-style-calendar_currentMonth__MhsrZ",otherMonth:"google-style-calendar_otherMonth__wVEwh",today:"google-style-calendar_today__t7lGH",dayNumber:"google-style-calendar_dayNumber__OQGuG",dayEvents:"google-style-calendar_dayEvents__EOeKL",eventIndicator:"google-style-calendar_eventIndicator__WaIR9",moreEvents:"google-style-calendar_moreEvents__js6__",modalBackdrop:"google-style-calendar_modalBackdrop__oLtTN",modal:"google-style-calendar_modal__xKIpT",modalHeader:"google-style-calendar_modalHeader__sZVF5",closeButton:"google-style-calendar_closeButton__DSAwT",eventForm:"google-style-calendar_eventForm__MDlxF",formGroup:"google-style-calendar_formGroup__F3Iw0",formInput:"google-style-calendar_formInput__jslJ_",formTextarea:"google-style-calendar_formTextarea__LdWmY",formActions:"google-style-calendar_formActions__hYUkR",saveButton:"google-style-calendar_saveButton___Vh2G",deleteButton:"google-style-calendar_deleteButton__7wiXq",confirmModal:"google-style-calendar_confirmModal__9_2F2",confirmActions:"google-style-calendar_confirmActions__TJmWC",cancelButton:"google-style-calendar_cancelButton__2Cdt2",confirmButton:"google-style-calendar_confirmButton__jVoYL",notification:"google-style-calendar_notification__Twe9n",slideIn:"google-style-calendar_slideIn__QKQVg",successNotification:"google-style-calendar_successNotification__hlAMP",errorNotification:"google-style-calendar_errorNotification__zY82V"}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4444:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var n=a(687),r=a(3210),s=a(6189),l=a(2267),o=a.n(l);function i({moduleId:e,initialEvents:t=[]}){let a=(0,s.useRouter)(),[l,i]=(0,r.useState)(new Date),[d,c]=(0,r.useState)(t),[u,m]=(0,r.useState)(!1),[g,_]=(0,r.useState)(null),[h,p]=(0,r.useState)(null),[x,v]=(0,r.useState)({title:"",date:"",description:""}),[f,j]=(0,r.useState)(!1),[y,N]=(0,r.useState)(null),[b,w]=(0,r.useState)(null),D=e=>d.filter(t=>{let a=new Date(t.date);return a.getDate()===e.getDate()&&a.getMonth()===e.getMonth()&&a.getFullYear()===e.getFullYear()}),C=e=>{_(e.date),v({title:"",date:e.date.toISOString().split("T")[0],description:""}),p(null),m(!0)},T=(e,t)=>{e.stopPropagation(),p(t),v({title:t.title,date:new Date(t.date).toISOString().split("T")[0],description:t.description||""}),m(!0)},M=e=>{let{name:t,value:a}=e.target;v(e=>({...e,[t]:a}))},k=()=>{m(!1),p(null),_(null)},B=(e,t="success")=>{N({message:e,type:t}),setTimeout(()=>N(null),3e3)},G=async t=>{t.preventDefault(),j(!0);try{let t=h?`/api/modules/${e}/events/${h._id}`:`/api/modules/${e}/events`,n=h?"PUT":"POST",r=await fetch(t,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}),s=await r.json();s.success?(B(h?"Termin aktualisiert":"Termin erstellt"),a.refresh(),k()):B(s.error||"Ein Fehler ist aufgetreten","error")}catch(e){console.error("Error saving event:",e),B("Ein Fehler ist aufgetreten","error")}finally{j(!1)}},E=async()=>{if(b)try{let t=await fetch(`/api/modules/${e}/events/${b}`,{method:"DELETE"}),n=await t.json();n.success?(B("Termin gel\xf6scht"),a.refresh(),k()):B(n.error||"Ein Fehler ist aufgetreten","error")}catch(e){console.error("Error deleting event:",e),B("Ein Fehler ist aufgetreten","error")}finally{w(null)}};return(0,n.jsxs)("div",{className:o().calendar,children:[(0,n.jsxs)("div",{className:o().calendarHeader,children:[(0,n.jsxs)("div",{className:o().calendarControls,children:[(0,n.jsx)("button",{onClick:()=>{i(new Date(l.getFullYear(),l.getMonth()-1,1))},className:o().navButton,children:"<"}),(0,n.jsx)("h2",{className:o().calendarTitle,children:l.toLocaleDateString("de-DE",{month:"long",year:"numeric"})}),(0,n.jsx)("button",{onClick:()=>{i(new Date(l.getFullYear(),l.getMonth()+1,1))},className:o().navButton,children:">"})]}),(0,n.jsx)("button",{onClick:()=>{i(new Date)},className:o().todayButton,children:"Heute"})]}),(0,n.jsxs)("div",{className:o().calendarGrid,children:[["So","Mo","Di","Mi","Do","Fr","Sa"].map((e,t)=>(0,n.jsx)("div",{className:o().weekDayHeader,children:e},t)),(()=>{let e=l.getFullYear(),t=l.getMonth(),a=new Date(e,t,1),n=new Date(e,t+1,0),r=a.getDay(),s=n.getDate(),o=[];if(r>0){let a=new Date(e,t,0).getDate();for(let n=a-r+1;n<=a;n++)o.push({date:new Date(e,t-1,n),isCurrentMonth:!1})}let i=[];for(let a=1;a<=s;a++)i.push({date:new Date(e,t,a),isCurrentMonth:!0});let d=[],c=42-(o.length+i.length);for(let a=1;a<=c;a++)d.push({date:new Date(e,t+1,a),isCurrentMonth:!1});return[...o,...i,...d]})().map((e,t)=>{let a=D(e.date),r=e.date.getDate()===new Date().getDate()&&e.date.getMonth()===new Date().getMonth()&&e.date.getFullYear()===new Date().getFullYear();return(0,n.jsxs)("div",{className:`${o().calendarDay} ${e.isCurrentMonth?o().currentMonth:o().otherMonth} ${r?o().today:""}`,onClick:()=>C(e),children:[(0,n.jsx)("div",{className:o().dayNumber,children:e.date.getDate()}),(0,n.jsxs)("div",{className:o().dayEvents,children:[a.slice(0,3).map((e,t)=>(0,n.jsx)("div",{className:o().eventIndicator,onClick:t=>T(t,e),children:e.title},t)),a.length>3&&(0,n.jsxs)("div",{className:o().moreEvents,children:["+",a.length-3," mehr"]})]})]},t)})]}),u&&(0,n.jsx)("div",{className:o().modalBackdrop,onClick:k,children:(0,n.jsxs)("div",{className:o().modal,onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:o().modalHeader,children:[(0,n.jsx)("h3",{children:h?"Termin bearbeiten":"Neuer Termin"}),(0,n.jsx)("button",{className:o().closeButton,onClick:k,children:"\xd7"})]}),(0,n.jsxs)("form",{onSubmit:G,className:o().eventForm,children:[(0,n.jsxs)("div",{className:o().formGroup,children:[(0,n.jsx)("label",{htmlFor:"title",children:"Titel"}),(0,n.jsx)("input",{type:"text",id:"title",name:"title",value:x.title,onChange:M,required:!0,placeholder:"Terminbezeichnung",className:o().formInput})]}),(0,n.jsxs)("div",{className:o().formGroup,children:[(0,n.jsx)("label",{htmlFor:"date",children:"Datum"}),(0,n.jsx)("input",{type:"date",id:"date",name:"date",value:x.date,onChange:M,required:!0,className:o().formInput})]}),(0,n.jsxs)("div",{className:o().formGroup,children:[(0,n.jsx)("label",{htmlFor:"description",children:"Beschreibung"}),(0,n.jsx)("textarea",{id:"description",name:"description",value:x.description,onChange:M,rows:"3",placeholder:"Beschreibung hinzuf\xfcgen (optional)",className:o().formTextarea})]}),(0,n.jsxs)("div",{className:o().formActions,children:[h&&(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),h&&w(h._id)},className:o().deleteButton,disabled:f,children:"L\xf6schen"}),(0,n.jsx)("button",{type:"submit",className:o().saveButton,disabled:f,children:f?"Wird gespeichert...":h?"Aktualisieren":"Speichern"})]})]})]})}),b&&(0,n.jsx)("div",{className:o().modalBackdrop,children:(0,n.jsxs)("div",{className:o().confirmModal,children:[(0,n.jsx)("h3",{children:"Termin l\xf6schen"}),(0,n.jsx)("p",{children:"M\xf6chten Sie diesen Termin wirklich l\xf6schen?"}),(0,n.jsxs)("div",{className:o().confirmActions,children:[(0,n.jsx)("button",{className:o().cancelButton,onClick:()=>{w(null)},children:"Abbrechen"}),(0,n.jsx)("button",{className:o().confirmButton,onClick:E,children:"L\xf6schen"})]})]})}),y&&(0,n.jsx)("div",{className:`${o().notification} ${"error"===y.type?o().errorNotification:o().successNotification}`,children:y.message})]})}},4536:(e,t,a)=>{let{createProxy:n}=a(9844);e.exports=n("C:\\Users\\Janjao\\GitHub\\schoolmanagmentsystem\\node_modules\\next\\dist\\client\\app-dir\\link.js")},4754:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,4536,23)),Promise.resolve().then(a.bind(a,1282))},5652:e=>{e.exports={container:"page_container__Ui_sE",pageTitle:"page_pageTitle__hwkFY",moduleNumber:"page_moduleNumber__K6RKi",moduleCard:"page_moduleCard__03_nl",section:"page_section__RnsEo",sectionTitle:"page_sectionTitle__ptEP6",sectionContent:"page_sectionContent__oHWmm",infoGrid:"page_infoGrid__3XAOt",infoItem:"page_infoItem__p_CJE",infoLabel:"page_infoLabel__f99on",infoValue:"page_infoValue__45Qt3",backButton:"page_backButton__rxjoH",gradesSection:"page_gradesSection__FV5s7",gradesGrid:"page_gradesGrid__5QSUn",gradeCard:"page_gradeCard___Or30",gradeTitle:"page_gradeTitle__vo5Fe",gradeValue:"page_gradeValue__i6UDT",gradeDate:"page_gradeDate__9H3b7",eventsList:"page_eventsList__hfKGA",eventItem:"page_eventItem__A4Yil",eventTitle:"page_eventTitle__Kl6Mw"}},7962:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,5814,23)),Promise.resolve().then(a.bind(a,4444))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9124:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var n=a(7413);let r=require("mongodb"),s=process.env.MONGODB_URI||"mongodb://localhost:27017/schoolManagementSystem",l=process.env.MONGODB_DB||"schoolManagementSystem";if(!s)throw Error("Please define MONGODB_URI in your .env.local file");let o=null;async function i(){try{let e=await o,t=e.db(l);return{client:e,db:t}}catch(e){throw console.error("MongoDB connection error:",e),Error("Failed to connect to database")}}o=new r.MongoClient(s).connect();var d=a(4536),c=a.n(d),u=a(5652),m=a.n(u),g=a(1282);async function _({params:e}){let t,{db:a}=await i();try{t=await a.collection("modules").findOne({_id:new r.ObjectId(e.id)})}catch(e){return(0,n.jsx)("div",{className:m().container,children:"Modul nicht gefunden"})}if(!t)return(0,n.jsx)("div",{className:m().container,children:"Modul nicht gefunden"});let s=await a.collection("grades").find({module_id:new r.ObjectId(e.id)}).toArray(),l=0===s.length?0:s.reduce((e,t)=>e+Number.parseFloat(t.grade||0),0)/s.length,o=t.events||[];return(0,n.jsxs)("div",{className:m().container,children:[(0,n.jsx)("h1",{className:m().pageTitle,children:t.title}),(0,n.jsxs)("p",{className:m().moduleNumber,children:["Modul-Nummer: ",t.module_number]}),(0,n.jsxs)("div",{className:m().moduleCard,children:[(0,n.jsxs)("div",{className:m().section,children:[(0,n.jsx)("h2",{className:m().sectionTitle,children:"Beschreibung"}),(0,n.jsx)("p",{className:m().sectionContent,children:t.description||"Keine Beschreibung verf\xfcgbar"})]}),(0,n.jsxs)("div",{className:m().section,children:[(0,n.jsx)("h2",{className:m().sectionTitle,children:"Terminkalender"}),(0,n.jsx)(g.default,{moduleId:e.id,initialEvents:o})]}),s.length>0&&(0,n.jsxs)("div",{className:m().section,children:[(0,n.jsx)("h2",{className:m().sectionTitle,children:"Noten"}),(0,n.jsx)("div",{className:m().gradesGrid,children:s.map((e,t)=>(0,n.jsxs)("div",{className:m().gradeCard,children:[(0,n.jsx)("h3",{className:m().gradeTitle,children:e.subject||"Pr\xfcfung"}),(0,n.jsx)("div",{className:m().gradeValue,children:Number.parseFloat(e.grade).toFixed(1)}),(0,n.jsxs)("div",{className:m().gradeDate,children:["Eingetragen am:"," ",new Date(e.createdAt).toLocaleDateString()]})]},t))}),(0,n.jsxs)("div",{style:{marginTop:"1.5rem",textAlign:"center"},children:[(0,n.jsx)("div",{className:m().sectionTitle,children:"Durchschnittsnote"}),(0,n.jsx)("div",{className:m().gradeValue,style:{display:"inline-block"},children:l.toFixed(2)})]})]}),(0,n.jsxs)("div",{className:m().section,children:[(0,n.jsx)("h2",{className:m().sectionTitle,children:"Termine"}),o.length>0?(0,n.jsx)("div",{className:m().eventsList,children:o.map((e,t)=>(0,n.jsxs)("div",{className:m().eventItem,children:[(0,n.jsx)("h3",{className:m().eventTitle,children:e.title}),(0,n.jsxs)("p",{className:m().sectionContent,children:["Datum: ",e.date]}),(0,n.jsx)("p",{className:m().sectionContent,children:e.description})]},t))}):(0,n.jsx)("p",{className:m().sectionContent,children:"Keine Termine"})]})]}),(0,n.jsx)(c(),{href:"/module",className:`${m().backButton} animated-button`,children:"Zur\xfcck zu Modulen"})]})}},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[719,616,658,89],()=>a(1880));module.exports=n})();