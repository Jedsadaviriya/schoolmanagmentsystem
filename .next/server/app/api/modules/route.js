(()=>{var e={};e.id=797,e.ids=[797],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2518:e=>{"use strict";e.exports=require("mongodb")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4863:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>h,routeModule:()=>d,serverHooks:()=>x,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>m});var s={};t.r(s),t.d(s,{GET:()=>c,POST:()=>l});var o=t(6559),n=t(8088),a=t(7719),i=t(2190),u=t(7455);async function c(){try{let{db:e}=await (0,u.$)(),r=await e.collection("modules").find({}).toArray();return i.NextResponse.json({success:!0,modules:r})}catch(e){return console.error("Error fetching modules:",e),i.NextResponse.json({success:!1,error:"Fehler beim Laden der Module"},{status:500})}}async function l(e){try{let{title:r,module_number:t,description:s,instructor:o,semester:n,credits:a,status:c}=await e.json();if(!r||!t)return i.NextResponse.json({success:!1,error:"Titel und Modulnummer sind erforderlich"},{status:400});let{db:l}=await (0,u.$)(),d=await l.collection("modules").insertOne({title:r,module_number:t,description:s||"",instructor:o||"",semester:n||"",credits:a||"",status:c||"Aktiv",events:[]});return i.NextResponse.json({success:!0,id:d.insertedId.toString()},{status:201})}catch(e){return console.error("Error creating module:",e),i.NextResponse.json({success:!1,error:"Fehler beim Erstellen des Moduls"},{status:500})}}t(2518);let d=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/modules/route",pathname:"/api/modules",filename:"route",bundlePath:"app/api/modules/route"},resolvedPagePath:"C:\\Users\\Janjao\\GitHub\\schoolmanagmentsystem\\src\\app\\api\\modules\\route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:p,workUnitAsyncStorage:m,serverHooks:x}=d;function h(){return(0,a.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:m})}},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},7455:(e,r,t)=>{"use strict";t.d(r,{$:()=>i});var s=t(2518);let o=process.env.MONGODB_URI||"mongodb://localhost:27017/schoolManagementSystem",n=process.env.MONGODB_DB||"schoolManagementSystem";if(!o)throw Error("Please define MONGODB_URI in your .env.local file");let a=null;async function i(){try{let e=await a,r=e.db(n);return{client:e,db:r}}catch(e){throw console.error("MongoDB connection error:",e),Error("Failed to connect to database")}}a=new s.MongoClient(o).connect()},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[719,580],()=>t(4863));module.exports=s})();