(()=>{var e={};e.id=693,e.ids=[693],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2454:(e,s,t)=>{"use strict";t.r(s),t.d(s,{patchFetch:()=>h,routeModule:()=>m,serverHooks:()=>g,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>j});var r={};t.r(r),t.d(r,{DELETE:()=>p,GET:()=>d,PUT:()=>l});var n=t(6559),o=t(8088),i=t(7719),u=t(2190),c=t(7455),a=t(2518);async function d(e,{params:s}){try{let{id:e}=s;if(!a.ObjectId.isValid(e))return u.NextResponse.json({success:!1,error:"Ung\xfcltige ID"},{status:400});let{db:t}=await (0,c.$)(),r=await t.collection("modules").findOne({_id:new a.ObjectId(e)});if(!r)return u.NextResponse.json({success:!1,error:"Modul nicht gefunden"},{status:404});return u.NextResponse.json({success:!0,modules:r})}catch(e){return console.error("Error fetching module:",e),u.NextResponse.json({success:!1,error:"Fehler beim Laden des Moduls"},{status:500})}}async function l(e,{params:s}){try{let{id:t}=s,r=await e.json();if(!a.ObjectId.isValid(t))return u.NextResponse.json({success:!1,error:"Ung\xfcltige ID"},{status:400});let{db:n}=await (0,c.$)(),o=await n.collection("modules").findOne({_id:new a.ObjectId(t)});if(!o)return u.NextResponse.json({success:!1,error:"Modul nicht gefunden"},{status:404});let i={...o,...r,_id:new a.ObjectId(t),events:o.events};return await n.collection("modules").updateOne({_id:new a.ObjectId(t)},{$set:i}),u.NextResponse.json({success:!0})}catch(e){return console.error("Error updating module:",e),u.NextResponse.json({success:!1,error:"Fehler beim Aktualisieren des Moduls"},{status:500})}}async function p(e,{params:s}){try{let{id:e}=s;if(!a.ObjectId.isValid(e))return u.NextResponse.json({success:!1,error:"Ung\xfcltige ID"},{status:400});let{db:t}=await (0,c.$)(),r=await t.collection("modules").deleteOne({_id:new a.ObjectId(e)});if(0===r.deletedCount)return u.NextResponse.json({success:!1,error:"Modul nicht gefunden"},{status:404});return u.NextResponse.json({success:!0})}catch(e){return console.error("Error deleting module:",e),u.NextResponse.json({success:!1,error:"Fehler beim L\xf6schen des Moduls"},{status:500})}}let m=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/modules/[id]/route",pathname:"/api/modules/[id]",filename:"route",bundlePath:"app/api/modules/[id]/route"},resolvedPagePath:"C:\\Users\\Janjao\\GitHub\\schoolmanagmentsystem\\src\\app\\api\\modules\\[id]\\route.js",nextConfigOutput:"",userland:r}),{workAsyncStorage:x,workUnitAsyncStorage:j,serverHooks:g}=m;function h(){return(0,i.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:j})}},2518:e=>{"use strict";e.exports=require("mongodb")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},7455:(e,s,t)=>{"use strict";t.d(s,{$:()=>u});var r=t(2518);let n=process.env.MONGODB_URI||"mongodb://localhost:27017/schoolManagementSystem",o=process.env.MONGODB_DB||"schoolManagementSystem";if(!n)throw Error("Please define MONGODB_URI in your .env.local file");let i=null;async function u(){try{let e=await i,s=e.db(o);return{client:e,db:s}}catch(e){throw console.error("MongoDB connection error:",e),Error("Failed to connect to database")}}i=new r.MongoClient(n).connect()},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[719,580],()=>t(2454));module.exports=r})();