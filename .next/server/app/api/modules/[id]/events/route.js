(()=>{var e={};e.id=163,e.ids=[163],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2322:(e,t,s)=>{"use strict";s.r(t),s.d(t,{patchFetch:()=>l,routeModule:()=>a,serverHooks:()=>d,workAsyncStorage:()=>u,workUnitAsyncStorage:()=>c});var r=s(6559),n=s(8088),o=s(7719),i=s(5023);let a=new r.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/modules/[id]/events/route",pathname:"/api/modules/[id]/events",filename:"route",bundlePath:"app/api/modules/[id]/events/route"},resolvedPagePath:"C:\\Users\\Janjao\\GitHub\\schoolmanagmentsystem\\src\\app\\api\\modules\\[id]\\events\\route.js",nextConfigOutput:"",userland:i}),{workAsyncStorage:u,workUnitAsyncStorage:c,serverHooks:d}=a;function l(){return(0,o.patchFetch)({workAsyncStorage:u,workUnitAsyncStorage:c})}},2518:e=>{"use strict";e.exports=require("mongodb")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5023:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GET:()=>i,POST:()=>a});var r=s(2190),n=s(7455),o=s(2518);async function i(t,{params:s}){try{let{id:t}=s;if(!o.ObjectId.isValid(t))return r.NextResponse.json({success:!1,error:"Ung\xfcltige Modul-ID"},{status:400});let{db:i}=await (0,n.$)(),a=await i.collection("modules").findOne({_id:new o.ObjectId(t)},{projection:{events:1}});if(!e)return r.NextResponse.json({success:!1,error:"Modul nicht gefunden"},{status:404});return r.NextResponse.json({success:!0,events:a.events||[]})}catch(e){return console.error("Error fetching events:",e),r.NextResponse.json({success:!1,error:"Fehler beim Laden der Ereignisse"},{status:500})}}async function a(e,{params:t}){try{let{id:s}=t,i=await e.json();if(!o.ObjectId.isValid(s))return r.NextResponse.json({success:!1,error:"Ung\xfcltige Modul-ID"},{status:400});if(!i.title||!i.date)return r.NextResponse.json({success:!1,error:"Titel und Datum sind erforderlich"},{status:400});let{db:a}=await (0,n.$)(),u={_id:new o.ObjectId().toString(),title:i.title,date:i.date,description:i.description||""},c=await a.collection("modules").updateOne({_id:new o.ObjectId(s)},{$push:{events:u}});if(0===c.matchedCount)return r.NextResponse.json({success:!1,error:"Modul nicht gefunden"},{status:404});return r.NextResponse.json({success:!0,event:u})}catch(e){return console.error("Error creating event:",e),r.NextResponse.json({success:!1,error:"Fehler beim Erstellen des Ereignisses"},{status:500})}}e=s.hmd(e)},6487:()=>{},7455:(e,t,s)=>{"use strict";s.d(t,{$:()=>a});var r=s(2518);let n=process.env.MONGODB_URI||"mongodb://localhost:27017/schoolManagementSystem",o=process.env.MONGODB_DB||"schoolManagementSystem";if(!n)throw Error("Please define MONGODB_URI in your .env.local file");let i=null;async function a(){try{let e=await i,t=e.db(o);return{client:e,db:t}}catch(e){throw console.error("MongoDB connection error:",e),Error("Failed to connect to database")}}i=new r.MongoClient(n).connect()},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[719,580],()=>s(2322));module.exports=r})();