(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[707],{1453:e=>{e.exports={container:"page_container__Ui_sE",pageTitle:"page_pageTitle__hwkFY",moduleNumber:"page_moduleNumber__K6RKi",moduleCard:"page_moduleCard__03_nl",section:"page_section__RnsEo",sectionTitle:"page_sectionTitle__ptEP6",sectionContent:"page_sectionContent__oHWmm",infoGrid:"page_infoGrid__3XAOt",infoItem:"page_infoItem__p_CJE",infoLabel:"page_infoLabel__f99on",infoValue:"page_infoValue__45Qt3",backButton:"page_backButton__rxjoH",gradesSection:"page_gradesSection__FV5s7",gradesGrid:"page_gradesGrid__5QSUn",gradeCard:"page_gradeCard___Or30",gradeTitle:"page_gradeTitle__vo5Fe",gradeValue:"page_gradeValue__i6UDT",gradeDate:"page_gradeDate__9H3b7",eventsList:"page_eventsList__hfKGA",eventItem:"page_eventItem__A4Yil",eventTitle:"page_eventTitle__Kl6Mw"}},2582:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,6874,23)),Promise.resolve().then(a.t.bind(a,1453,23)),Promise.resolve().then(a.bind(a,2730))},2730:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var n=a(5155),l=a(2115),o=a(5695),r=a(6574),s=a.n(r);function i(e){let{moduleId:t,initialEvents:a=[]}=e,r=(0,o.useRouter)(),[i,c]=(0,l.useState)(new Date),[d,_]=(0,l.useState)(a),[g,u]=(0,l.useState)(!1),[m,h]=(0,l.useState)(null),[p,f]=(0,l.useState)(null),[y,v]=(0,l.useState)({title:"",date:"",description:""}),[N,x]=(0,l.useState)(!1),[j,D]=(0,l.useState)(null),[b,T]=(0,l.useState)(null);(0,l.useEffect)(()=>{_(a)},[a]);let w=e=>d.filter(t=>{let a=new Date(t.date);return a.getDate()===e.getDate()&&a.getMonth()===e.getMonth()&&a.getFullYear()===e.getFullYear()}),C=e=>{h(e.date),v({title:"",date:e.date.toISOString().split("T")[0],description:""}),f(null),u(!0)},k=(e,t)=>{e.stopPropagation(),f(t),v({title:t.title,date:new Date(t.date).toISOString().split("T")[0],description:t.description||""}),u(!0)},B=e=>{let{name:t,value:a}=e.target;v(e=>({...e,[t]:a}))},M=()=>{u(!1),f(null),h(null)},E=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";D({message:e,type:t}),setTimeout(()=>D(null),3e3)},S=async e=>{e.preventDefault(),x(!0);try{let e=p?"/api/modules/".concat(t,"/events/").concat(p._id):"/api/modules/".concat(t,"/events"),a=p?"PUT":"POST",n=await fetch(e,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(y)}),l=await n.json();l.success?(E(p?"Termin aktualisiert":"Termin erstellt"),r.refresh(),M()):E(l.error||"Ein Fehler ist aufgetreten","error")}catch(e){console.error("Error saving event:",e),E("Ein Fehler ist aufgetreten","error")}finally{x(!1)}},F=async()=>{if(b)try{let e=await fetch("/api/modules/".concat(t,"/events/").concat(b),{method:"DELETE"}),a=await e.json();a.success?(E("Termin gel\xf6scht"),r.refresh(),M()):E(a.error||"Ein Fehler ist aufgetreten","error")}catch(e){console.error("Error deleting event:",e),E("Ein Fehler ist aufgetreten","error")}finally{T(null)}};return(0,n.jsxs)("div",{className:s().calendar,children:[(0,n.jsxs)("div",{className:s().calendarHeader,children:[(0,n.jsxs)("div",{className:s().calendarControls,children:[(0,n.jsx)("button",{onClick:()=>{c(new Date(i.getFullYear(),i.getMonth()-1,1))},className:s().navButton,children:"<"}),(0,n.jsx)("h2",{className:s().calendarTitle,children:i.toLocaleDateString("de-DE",{month:"long",year:"numeric"})}),(0,n.jsx)("button",{onClick:()=>{c(new Date(i.getFullYear(),i.getMonth()+1,1))},className:s().navButton,children:">"})]}),(0,n.jsx)("button",{onClick:()=>{c(new Date)},className:s().todayButton,children:"Heute"})]}),(0,n.jsxs)("div",{className:s().calendarGrid,children:[["So","Mo","Di","Mi","Do","Fr","Sa"].map((e,t)=>(0,n.jsx)("div",{className:s().weekDayHeader,children:e},t)),(()=>{let e=i.getFullYear(),t=i.getMonth(),a=new Date(e,t,1),n=new Date(e,t+1,0),l=a.getDay(),o=n.getDate(),r=[];if(l>0){let a=new Date(e,t,0).getDate();for(let n=a-l+1;n<=a;n++)r.push({date:new Date(e,t-1,n),isCurrentMonth:!1})}let s=[];for(let a=1;a<=o;a++)s.push({date:new Date(e,t,a),isCurrentMonth:!0});let c=[],d=42-(r.length+s.length);for(let a=1;a<=d;a++)c.push({date:new Date(e,t+1,a),isCurrentMonth:!1});return[...r,...s,...c]})().map((e,t)=>{let a=w(e.date),l=e.date.getDate()===new Date().getDate()&&e.date.getMonth()===new Date().getMonth()&&e.date.getFullYear()===new Date().getFullYear();return(0,n.jsxs)("div",{className:"".concat(s().calendarDay," ").concat(e.isCurrentMonth?s().currentMonth:s().otherMonth," ").concat(l?s().today:""),onClick:()=>C(e),children:[(0,n.jsx)("div",{className:s().dayNumber,children:e.date.getDate()}),(0,n.jsxs)("div",{className:s().dayEvents,children:[a.slice(0,3).map((e,t)=>(0,n.jsx)("div",{className:s().eventIndicator,onClick:t=>k(t,e),children:e.title},t)),a.length>3&&(0,n.jsxs)("div",{className:s().moreEvents,children:["+",a.length-3," mehr"]})]})]},t)})]}),g&&(0,n.jsx)("div",{className:s().modalBackdrop,onClick:M,children:(0,n.jsxs)("div",{className:s().modal,onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:s().modalHeader,children:[(0,n.jsx)("h3",{children:p?"Termin bearbeiten":"Neuer Termin"}),(0,n.jsx)("button",{className:s().closeButton,onClick:M,children:"\xd7"})]}),(0,n.jsxs)("form",{onSubmit:S,className:s().eventForm,children:[(0,n.jsxs)("div",{className:s().formGroup,children:[(0,n.jsx)("label",{htmlFor:"title",children:"Titel"}),(0,n.jsx)("input",{type:"text",id:"title",name:"title",value:y.title,onChange:B,required:!0,placeholder:"Terminbezeichnung",className:s().formInput})]}),(0,n.jsxs)("div",{className:s().formGroup,children:[(0,n.jsx)("label",{htmlFor:"date",children:"Datum"}),(0,n.jsx)("input",{type:"date",id:"date",name:"date",value:y.date,onChange:B,required:!0,className:s().formInput})]}),(0,n.jsxs)("div",{className:s().formGroup,children:[(0,n.jsx)("label",{htmlFor:"description",children:"Beschreibung"}),(0,n.jsx)("textarea",{id:"description",name:"description",value:y.description,onChange:B,rows:"3",placeholder:"Beschreibung hinzuf\xfcgen (optional)",className:s().formTextarea})]}),(0,n.jsxs)("div",{className:s().formActions,children:[p&&(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),p&&T(p._id)},className:s().deleteButton,disabled:N,children:"L\xf6schen"}),(0,n.jsx)("button",{type:"submit",className:s().saveButton,disabled:N,children:N?"Wird gespeichert...":p?"Aktualisieren":"Speichern"})]})]})]})}),b&&(0,n.jsx)("div",{className:s().modalBackdrop,children:(0,n.jsxs)("div",{className:s().confirmModal,children:[(0,n.jsx)("h3",{children:"Termin l\xf6schen"}),(0,n.jsx)("p",{children:"M\xf6chten Sie diesen Termin wirklich l\xf6schen?"}),(0,n.jsxs)("div",{className:s().confirmActions,children:[(0,n.jsx)("button",{className:s().cancelButton,onClick:()=>{T(null)},children:"Abbrechen"}),(0,n.jsx)("button",{className:s().confirmButton,onClick:F,children:"L\xf6schen"})]})]})}),j&&(0,n.jsx)("div",{className:"".concat(s().notification," ").concat("error"===j.type?s().errorNotification:s().successNotification),children:j.message})]})}},5695:(e,t,a)=>{"use strict";var n=a(8999);a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}})},6574:e=>{e.exports={calendar:"google-style-calendar_calendar__KWue0",calendarHeader:"google-style-calendar_calendarHeader__mAkbL",calendarControls:"google-style-calendar_calendarControls__cgSW2",calendarTitle:"google-style-calendar_calendarTitle__UjUzx",navButton:"google-style-calendar_navButton__uNHrL",todayButton:"google-style-calendar_todayButton__eO3lV",calendarGrid:"google-style-calendar_calendarGrid__UWVM1",weekDayHeader:"google-style-calendar_weekDayHeader__0qqA_",calendarDay:"google-style-calendar_calendarDay__TQrue",currentMonth:"google-style-calendar_currentMonth__MhsrZ",otherMonth:"google-style-calendar_otherMonth__wVEwh",today:"google-style-calendar_today__t7lGH",dayNumber:"google-style-calendar_dayNumber__OQGuG",dayEvents:"google-style-calendar_dayEvents__EOeKL",eventIndicator:"google-style-calendar_eventIndicator__WaIR9",moreEvents:"google-style-calendar_moreEvents__js6__",modalBackdrop:"google-style-calendar_modalBackdrop__oLtTN",modal:"google-style-calendar_modal__xKIpT",modalHeader:"google-style-calendar_modalHeader__sZVF5",closeButton:"google-style-calendar_closeButton__DSAwT",eventForm:"google-style-calendar_eventForm__MDlxF",formGroup:"google-style-calendar_formGroup__F3Iw0",formInput:"google-style-calendar_formInput__jslJ_",formTextarea:"google-style-calendar_formTextarea__LdWmY",formActions:"google-style-calendar_formActions__hYUkR",saveButton:"google-style-calendar_saveButton___Vh2G",deleteButton:"google-style-calendar_deleteButton__7wiXq",confirmModal:"google-style-calendar_confirmModal__9_2F2",confirmActions:"google-style-calendar_confirmActions__TJmWC",cancelButton:"google-style-calendar_cancelButton__2Cdt2",confirmButton:"google-style-calendar_confirmButton__jVoYL",notification:"google-style-calendar_notification__Twe9n",slideIn:"google-style-calendar_slideIn__QKQVg",successNotification:"google-style-calendar_successNotification__hlAMP",errorNotification:"google-style-calendar_errorNotification__zY82V"}}},e=>{var t=t=>e(e.s=t);e.O(0,[230,874,441,684,358],()=>t(2582)),_N_E=e.O()}]);